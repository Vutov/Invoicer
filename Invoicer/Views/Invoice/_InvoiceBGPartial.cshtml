@using Invoicer.Models.ViewModels.InvoiceViewModels
@model InvoiceViewModel

<div class="container">
    <h1 class="text-center">Фактура</h1>
    <div class="row">
        <h2 class="col-xs-8 text-center">Копие</h2>
        <div class="col-xs-4">
            <div class="row">
                <div class="col-xs-6 text-right">Номер:</div>
                <div class="col-xs-6 text-right">@Model.InvoiceNumber.ToString("0000000000")</div>
            </div>
            <div class="row">
                <div class="col-xs-6 text-right">Дата:</div>
                <div class="col-xs-6 text-right">@Model.InvoiceDate.ToString("dd.MM.yyyy")</div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-6 border">
            @await Html.PartialAsync("_ClientPartialView", @Model.Client)
        </div>
        <div class="col-xs-6 border">
            @await Html.PartialAsync("_ClientPartialView", @Model.Distributor)
        </div>
    </div>
    <div class="row">
        @await Html.PartialAsync("_ProductTablePartialVIew", @Model.Products)
        <div class="col-xs-4 col-xs-offset-8">
            @{
                var totalAmount = @Model.Products.Sum(p => p.TotalAmount);
                var vatAmount = totalAmount * Model.Vat / 100;
                var allAmount = totalAmount + vatAmount;
                <div class="row">
                    <div class="col-xs-6 text-right">Данъчна основа:</div>
                    <div class="col-xs-6 text-right">@totalAmount.ToString("F2")</div>
                </div>
                <div class="row">
                    <div class="col-xs-6 text-right">ДДС @Model.Vat.ToString("F2")%:</div>
                    <div class="col-xs-6 text-right">@vatAmount.ToString("F2")</div>
                </div>
                <div class="row">
                    <div class="col-xs-6 text-right">Сума за плащане:</div>
                    <div class="col-xs-6 text-right">@allAmount.ToString("F2")</div>
                </div>
            }
        </div>
    </div>
</div>